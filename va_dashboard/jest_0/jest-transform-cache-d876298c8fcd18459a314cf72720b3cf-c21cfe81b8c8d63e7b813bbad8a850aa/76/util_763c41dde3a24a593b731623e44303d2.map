{"version":3,"sources":["util.js"],"names":["Network","require","isEmpty","obj","key","hasOwnProperty","getRandomColor","letters","split","color","i","Math","floor","random","getRandomColors","count","colors","j","push","arr2str","arr","delimiter","join","str2arr","str","obj2str","reduceArr","map","objArr2str","getTableRow","columns","data","col","index","getTableRowWithLink","onClick","result","bind","concat","slice","getTableRowWithAction","btnText","btnVal","btnClick","onLinkClick","rowIndex","rows","getTableRowWithActions","actions","action","param","items","a","getModalHeader","title","getModalFooter","buttons","btns","btn","label","bsStyle","initializeFields","fields","state","length","initializeFieldsWithValues","values","initSelectOptions","o","value","getReduxComponent","ReactComponent","reducers","newstate","auth","r","callPanelAction","token","callbackSuccess","callbackError","post","done","msg","fail","download","url","fileWithExt","callback","download_file","d","Blob","type","window","URL","createObjectURL","tempLink","document","createElement","style","href","setAttribute","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","getSpinner","spinnerStyle","capitalizeFirstLetter","text","toUpperCase","substr","getFormFields","f","size","module","exports"],"mappings":"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","file":"util.js","sourcesContent":["import React, { Component } from 'react';\nimport { Table, Tr, Td } from 'reactable';\nimport { Button, DropdownButton, MenuItem, Modal, FormGroup } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nvar Network = require('../network');\n\nfunction isEmpty(obj) {\n    for(var key in obj) {\n        if(obj.hasOwnProperty(key))\n            return false;\n    }\n    return true;\n}\n\nfunction getRandomColor() {\n    var letters = '0123456789ABCDEF'.split('');\n    var color = '#';\n    for (var i = 0; i < 6; i++ ) {\n        color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n}\nfunction getRandomColors(count) {\n    var letters = '0123456789ABCDEF'.split('');\n    var colors = [];\n    for(var j = 0; j < count; j++){\n        var color = '#';\n        for (var i = 0; i < 6; i++ ) {\n            color += letters[Math.floor(Math.random() * 16)];\n        }\n        colors.push(color);\n    }\n    return colors;\n}\nfunction arr2str(arr, delimiter=', ') {\n    return arr.join(delimiter);\n}\nfunction str2arr(str, delimiter=', ') {\n    return str.split(delimiter);\n}\nfunction obj2str(obj, key){\n    return obj[key];\n}\nfunction reduceArr(arr, key){\n    return arr.map(obj => obj[key]);\n}\nfunction objArr2str(arr, key) {\n    return arr2str(reduceArr(arr, key));\n}\nfunction getTableRow(columns, data) {\n    return columns.map((col, index) => {\n        return <Td key={col} column={col}>{data[index]}</Td>;\n    });\n}\nfunction getTableRowWithLink(columns, data, onClick, index) {\n    let result = [<Td key={columns[0]} column={columns[0]}><span className=\"link\" onClick={onClick.bind(null, data[0], index)}>{data[0]}</span></Td>];\n\treturn result.concat(getTableRow(columns.slice(1), data.slice(1)));\n}\nfunction getTableRowWithAction(columns, data, btnText, btnVal, btnClick, onLinkClick, rowIndex) {\n    let rows = onLinkClick ? getTableRowWithLink(columns, data, onLinkClick, rowIndex) : getTableRow(columns, data);\n    rows.push(<Td key=\"Actions\" column=\"Actions\"><Button type=\"button\" bsStyle='primary' onClick={btnClick} value={btnVal}>{btnText}</Button></Td>);\n    return rows;\n}\nfunction getTableRowWithActions(columns, data, actions, action, param, onLinkClick, rowIndex) {\n    let rows = onLinkClick ? getTableRowWithLink(columns, data, onLinkClick, rowIndex) : getTableRow(columns, data);\n    let items = actions.map(a => {\n        return <MenuItem key={a} eventKey={a}>{a}</MenuItem>\n    });\n    rows.push((\n        <Td key=\"Actions\" column=\"Actions\">\n            <DropdownButton bsStyle='primary' title=\"Choose\" onSelect={action.bind(null, param, rowIndex)}>{items}</DropdownButton>\n        </Td>\n        ));\n    return rows;\n}\nfunction getModalHeader(title){\n    return (\n\t\t<Modal.Header closeButton>\n            <Modal.Title>{title}</Modal.Title>\n\t\t</Modal.Header>\n    );\n}\nfunction getModalFooter(buttons){\n    let btns = buttons.map((btn, i) => {\n        let { label, bsStyle, onClick } = btn;\n        return <Button key={i} onClick={onClick} bsStyle={bsStyle}>{label}</Button>;\n    });\n\treturn (\n\t\t<Modal.Footer>\n\t\t\t{ btns }\n\t\t</Modal.Footer>\n\t);\n}\n\nfunction initializeFields(fields) {\n    let state = {};\n    for(let i=0; i<fields.length; i++)\n        state[fields[i].key] = \"\";\n    return state;\n}\n\nfunction initializeFieldsWithValues(fields, values) {\n    let state = {}\n    for(let i=0; i<fields.length; i++){\n        let key = fields[i].key;\n        state[key] = values[key];\n    }\n    return state;\n}\n\nfunction initSelectOptions(arr){\n    return arr.map(o => ({label: o, value: o}));\n}\n\nfunction getReduxComponent(ReactComponent, reducers){\n    return connect(state => {\n        let newstate = {auth: state.auth};\n        if(reducers){\n            for (let i = 0; i < reducers.length; i++) {\n                let r = reducers[i];\n                newstate[r] = state[r];\n            }\n        }\n        return newstate;\n    })(ReactComponent);\n}\n\nfunction callPanelAction(token, data, callbackSuccess, callbackError){\n\tNetwork.post('/api/panels/action', token, data).done(msg => {\n\t\tif(typeof msg === 'string'){\n\t\t\tcallbackSuccess(msg);\n\t\t}\n\t}).fail(msg => {\n\t\tcallbackError(msg);\n\t});\n}\n\nfunction download(url, token, data, fileWithExt, callback){\n\tNetwork.download_file(url, token, data).done(function(d) {\n\t\tvar data = new Blob([d], {type: 'octet/stream'});\n\t\tvar url = window.URL.createObjectURL(data);\n\t\tlet tempLink = document.createElement('a');\n\t\ttempLink.style = \"display: none\";\n\t\ttempLink.href = url;\n\t\ttempLink.setAttribute('download', fileWithExt);\n\t\tdocument.body.appendChild(tempLink);\n\t\ttempLink.click();\n\t\tsetTimeout(function(){\n\t\t\tdocument.body.removeChild(tempLink);\n\t\t\twindow.URL.revokeObjectURL(url);\n\t\t}, 100);\n\t}).fail(function (msg) {\n\t\tcallback(msg);\n\t});\n}\n\nfunction getSpinner(spinnerStyle){\n    return <span className=\"spinner\" style={spinnerStyle} ><i className=\"fa fa-spinner fa-spin fa-3x\" aria-hidden=\"true\"></i></span>;\n}\n\nfunction capitalizeFirstLetter(text){\n    return text[0].toUpperCase() + text.substr(1);\n}\n\nfunction getFormFields(fields){\n    return fields.map(f => {\n        return (\n            <FormGroup>\n                <label className={`col-sm-${12-f.size} control-label`}>{f.label}</label>\n                <div className={`col-sm-${f.size}`}>\n                    <input type={f.type} className=\"form-control\" ref={f.key} />\n                </div>\n            </FormGroup>\n        );\n    });\n}\n\nmodule.exports = {\n    isEmpty,\n    getRandomColor,\n    getRandomColors,\n    getTableRow,\n    getTableRowWithAction,\n    getTableRowWithActions,\n    getModalHeader,\n\tgetModalFooter,\n    initializeFields,\n    initializeFieldsWithValues,\n    arr2str,\n    reduceArr,\n    objArr2str,\n    initSelectOptions,\n    getReduxComponent,\n    callPanelAction,\n    download,\n    getSpinner,\n    capitalizeFirstLetter,\n    getFormFields\n}\n"]}